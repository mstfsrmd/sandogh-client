{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/mormad/Documents/sandogh/client/src/components/register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, Director, useHistory, useLocation, withRouter } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport host from '../constants/host';\nconst socket = io.connect(host, {\n  transports: ['websocket']\n});\n\nconst Register = ({\n  isVerified\n}) => {\n  _s();\n\n  document.title = 'ثبت نام در صندوق یار';\n  const [userValue, setUserValue] = useState('');\n  const [codeValue, setCodeValue] = useState('');\n  const [emailValue, setEmailValue] = useState('');\n  const [passValue, setPassValue] = useState('');\n  const [error, setError] = useState(false);\n  const [registered, setRegistered] = useState(false);\n  useEffect(() => {\n    socket.on('isUsr', function (e) {\n      if (e) {\n        setError('این نام کاربری درحال حاضر موجود است');\n        document.getElementById('register-button').disabled = true;\n        document.getElementById('register-button').style.opacity = .5;\n        document.getElementById('register-button').style.cursor = 'not-allowed';\n      } else {\n        setError('');\n        document.getElementById('register-button').disabled = false;\n        document.getElementById('register-button').style.opacity = 1;\n        document.getElementById('register-button').style.cursor = 'pointer';\n      }\n    });\n  }, [error]);\n  useEffect(() => {\n    socket.on('siggnUpOk', function (e) {\n      if (e) {\n        setRegistered(true);\n        isVerified(true);\n      } else {\n        alert('اوه! مشکلی رخ داد! لطفا دوباره تلاش کنید.');\n        isVerified(false);\n      }\n    });\n  }, [registered]);\n  useEffect(() => {\n    socket.on('isCode', function (e) {\n      if (e) {\n        setError('این کد ملی درحال حاضر موجود است');\n        document.getElementById('register-button').disabled = true;\n        document.getElementById('register-button').style.opacity = .6;\n        document.getElementById('register-button').style.cursor = 'not-allowed';\n      } else {\n        setError('');\n        document.getElementById('register-button').disabled = false;\n        document.getElementById('register-button').style.opacity = 1;\n        document.getElementById('register-button').style.cursor = 'pointer';\n      }\n    });\n  }, [error]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"login\",\n    dir: \"rtl\",\n    onSubmit: event => {\n      event.preventDefault();\n      socket.emit('usrinfo', {\n        userValue,\n        emailValue,\n        passValue,\n        codeValue\n      });\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"login-input first-input-lineR\",\n        type: \"text\",\n        value: userValue,\n        onChange: e => {\n          const user = e.target.value;\n          setUserValue(user);\n          socket.emit('checkUsername', user);\n\n          if (user == '') {\n            setError('');\n          }\n        },\n        onFocus: e => {\n          document.getElementById('input-sub-n').style.display = 'block';\n        },\n        onBlur: e => {\n          document.getElementById('input-sub-n').style.display = 'none';\n        },\n        placeholder: \"\\u0646\\u0627\\u0645 \\u0648 \\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC \",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"login-input first-input-lineL\",\n        type: \"text\",\n        maxLength: 12,\n        value: codeValue,\n        onChange: e => {\n          const code = e.target.value;\n          socket.emit('checkNCode', code);\n\n          if (code == '') {\n            setError('');\n          }\n\n          if (code.length == 3 || code.length == 10) {\n            setCodeValue(code + \"-\");\n          } else {\n            setCodeValue(code);\n          }\n        },\n        onFocus: e => {\n          document.getElementById('input-sub-u').style.display = 'block';\n        },\n        onBlur: e => {\n          document.getElementById('input-sub-u').style.display = 'none';\n          let a = [];\n          let codeArray = e.target.value.replace(\"-\", \"\").replace(\"-\", \"\").split('');\n\n          for (var i = 0; i <= 8; i++) {\n            a.push(codeArray[i] * (10 - i));\n          }\n\n          console.log(codeArray);\n          let r = (a[0] + a[1] + a[2] + a[3] + a[4] + a[5] + a[6] + a[7] + a[8]) % 11;\n\n          if (r < 2) {\n            if (codeArray[9] != 2) {\n              setError(\"کد ملی صحیح نیست. از انگلیسی بودن اعداد اطمینان حاصل کنید\");\n              document.getElementById('register-button').disabled = true;\n              document.getElementById('register-button').style.opacity = .6;\n              document.getElementById('register-button').style.cursor = 'not-allowed';\n            } else {\n              setError(\"\");\n            }\n          } else {\n            if (codeArray[9] != 11 - r) {\n              setError(\"کد ملی صحیح نیست. از انگلیسی بودن اعداد اطمینان حاصل کنید\");\n              document.getElementById('register-button').disabled = true;\n              document.getElementById('register-button').style.opacity = .6;\n              document.getElementById('register-button').style.cursor = 'not-allowed';\n            } else {\n              setError(\"\");\n            }\n          }\n        },\n        placeholder: \"\\u06A9\\u062F \\u0645\\u0644\\u06CC\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"input-sub\",\n      id: 'input-sub-n',\n      children: \"\\u0644\\u0637\\u0641\\u0627 \\u0646\\u0627\\u0645 \\u0648 \\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC \\u062E\\u0648\\u062F \\u0631\\u0627 \\u06A9\\u0627\\u0645\\u0644 \\u0648 \\u0628\\u0627 \\u06CC\\u06A9 \\u0641\\u0627\\u0635\\u0644\\u0647 \\u062F\\u0631 \\u0628\\u06CC\\u0646 \\u0648\\u0627\\u0631\\u062F \\u06A9\\u0646\\u06CC\\u062F. \\u0627\\u06CC\\u0646 \\u0628\\u0647 \\u0633\\u06CC\\u0633\\u062A\\u0645 \\u06A9\\u0645\\u06A9 \\u0645\\u06CC\\u06A9\\u0646\\u062F \\u062A\\u0627 \\u0627\\u06AF\\u0631 \\u0639\\u0636\\u0648 \\u0635\\u0646\\u062F\\u0648\\u0642 \\u0628\\u0648\\u062F\\u0647 \\u0627\\u06CC\\u062F \\u0634\\u0645\\u0627 \\u0631\\u0627 \\u0634\\u0646\\u0627\\u0633\\u0627\\u06CC\\u06CC \\u06A9\\u0646\\u062F.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"input-sub\",\n      id: 'input-sub-u',\n      children: [\"\\u06A9\\u062F \\u0645\\u0644\\u06CC \\u0634\\u0645\\u0627 \\u062A\\u0646\\u0647\\u0627 \\u062F\\u0631 \\u0627\\u062E\\u062A\\u06CC\\u0627\\u0631 \\u0645\\u062F\\u06CC\\u0631\\u0627\\u0646 \\u0642\\u0631\\u0627\\u0631 \\u062E\\u0648\\u0627\\u0647\\u062F \\u06AF\\u0631\\u0641\\u062A \\u062A\\u0627 \\u0627\\u06AF\\u0631 \\u0642\\u0628\\u0644\\u0627 \\u0639\\u0636\\u0648 \\u0635\\u0646\\u062F\\u0648\\u0642 \\u0628\\u0648\\u062F\\u06CC\\u062F \\u0634\\u0645\\u0627 \\u0631\\u0627 \\u0634\\u0646\\u0627\\u0633\\u0627\\u06CC\\u06CC \\u06A9\\u0646\\u0646\\u062F \\u0648 \\u0627\\u06AF\\u0631 \\u0639\\u0636\\u0648 \\u062C\\u062F\\u06CC\\u062F \\u0647\\u0633\\u062A\\u06CC\\u062F\\u060C \\u0634\\u0646\\u0627\\u0633\\u0647 \\u0645\\u0646\\u062D\\u0635\\u0631 \\u0628\\u0647 \\u0641\\u0631\\u062F \\u0634\\u0645\\u0627 \\u0628\\u0627\\u0634\\u062F. \\u067E\\u0633 \\u0627\\u0632 \\u062A\\u0627\\u06CC\\u06CC\\u062F\\u060C \\u0645\\u06CC \\u062A\\u0648\\u0627\\u0646\\u06CC\\u062F \\u0622\\u0646 \\u0631\\u0627 \\u062A\\u063A\\u06CC\\u06CC\\u0631 \\u062F\\u0647\\u06CC\\u062F. \\u0628\\u0631\\u0627\\u06CC \\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A \\u0628\\u06CC\\u0634\\u062A\\u0631 \\u0645\\u06CC\\u062A\\u0648\\u0627\\u0646\\u06CC\\u062F \\u0628\\u0647 \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/privacy\",\n        style: {\n          color: 'black'\n        },\n        children: \"\\u0633\\u06CC\\u0627\\u0633\\u062A \\u062D\\u0631\\u06CC\\u0645 \\u062E\\u0635\\u0648\\u0635\\u06CC \\u0645\\u0627 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 273\n      }, this), \" \\u0645\\u0631\\u0627\\u062C\\u0639\\u0647 \\u06A9\\u0646\\u06CC\\u062F.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"login-input\",\n        type: \"tel\",\n        value: emailValue,\n        onChange: e => {\n          setEmailValue(e.target.value);\n        },\n        placeholder: \"\\u06CC\\u06A9 \\u0634\\u0645\\u0627\\u0631\\u0647 \\u062A\\u0644\\u0641\\u0646 \\u0647\\u0645\\u0631\\u0627\\u0647 \\u0648\\u0627\\u0631\\u062F \\u06A9\\u0646\\u06CC\\u062F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"login-input\",\n        type: \"password\",\n        value: passValue,\n        onChange: e => {\n          setPassValue(e.target.value);\n        },\n        placeholder: \"\\u06CC\\u06A9 \\u0631\\u0645\\u0632\\u0639\\u0628\\u0648\\u0631 \\u0642\\u0648\\u06CC \\u0627\\u0646\\u062A\\u062E\\u0627\\u0628 \\u06A9\\u0646\\u06CC\\u062F\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-cont\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"create-account\",\n        to: '/login',\n        children: \"\\u0648\\u0631\\u0648\\u062F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"register-button\",\n        className: \"submit-button\",\n        children: \"\\u0627\\u06CC\\u062C\\u0627\\u062F \\u062D\\u0633\\u0627\\u0628\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Register, \"lSgnaRjrelzsAZwNJv2z3Vuuf+s=\");\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/home/mormad/Documents/sandogh/client/src/components/register.js"],"names":["React","useState","useEffect","Link","Director","useHistory","useLocation","withRouter","io","host","socket","connect","transports","Register","isVerified","document","title","userValue","setUserValue","codeValue","setCodeValue","emailValue","setEmailValue","passValue","setPassValue","error","setError","registered","setRegistered","on","e","getElementById","disabled","style","opacity","cursor","alert","event","preventDefault","emit","user","target","value","display","code","length","a","codeArray","replace","split","i","push","console","log","r","color"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {\n  Link,\n  Director,\n  useHistory,\n  useLocation,\n  withRouter\n} from 'react-router-dom';\nimport io from 'socket.io-client';\nimport host from '../constants/host'\nconst socket = io.connect(host,{transports: ['websocket']});\n\nconst Register = ({isVerified}) => {\n  document.title = 'ثبت نام در صندوق یار';\n  const[userValue, setUserValue] = useState('');\n  const[codeValue, setCodeValue] = useState('');\n  const[emailValue, setEmailValue] = useState('');\n  const[passValue, setPassValue] = useState('');\n  const[error, setError] = useState(false);\n  const[registered, setRegistered] = useState(false);\n\n  useEffect(() => {\n    socket.on('isUsr',function (e) {\n      if (e) {\n        setError('این نام کاربری درحال حاضر موجود است')\n        document.getElementById('register-button').disabled = true;\n        document.getElementById('register-button').style.opacity = .5;\n        document.getElementById('register-button').style.cursor = 'not-allowed'\n      }else {\n        setError('')\n        document.getElementById('register-button').disabled = false;\n        document.getElementById('register-button').style.opacity = 1;\n        document.getElementById('register-button').style.cursor = 'pointer'\n      }\n    })\n  }, [error])\n  useEffect(() => {\n    socket.on('siggnUpOk',function (e) {\n      if (e) {\n        setRegistered(true);\n        isVerified(true)\n      }else {\n        alert('اوه! مشکلی رخ داد! لطفا دوباره تلاش کنید.')\n        isVerified(false)\n      }\n    })\n  }, [registered])\n\n  useEffect(() => {\n    socket.on('isCode',function (e) {\n      if (e) {\n        setError('این کد ملی درحال حاضر موجود است')\n        document.getElementById('register-button').disabled = true;\n        document.getElementById('register-button').style.opacity = .6;\n        document.getElementById('register-button').style.cursor = 'not-allowed'\n      }else {\n        setError('')\n        document.getElementById('register-button').disabled = false;\n        document.getElementById('register-button').style.opacity = 1;\n        document.getElementById('register-button').style.cursor = 'pointer'\n      }\n    })\n  }, [error])\n\n  return (\n    <form className=\"login\" dir=\"rtl\" onSubmit={\n      (event) => {\n        event.preventDefault();\n        socket.emit('usrinfo', {userValue, emailValue, passValue, codeValue})\n      }\n    }>\n    <div>\n      <input className=\"login-input first-input-lineR\"\n      type=\"text\"\n      value={userValue}\n      onChange={(\n        (e)=>{\n          const user = e.target.value;\n          setUserValue(user)\n          socket.emit('checkUsername', user)\n          if (user == '') {\n            setError('')\n          }\n        }\n      )}\n      onFocus={(\n        (e)=>{\n          document.getElementById('input-sub-n').style.display = 'block';\n        }\n      )}\n      onBlur={(\n        (e)=>{\n          document.getElementById('input-sub-n').style.display = 'none';\n        }\n      )}\n      placeholder=\"نام و نام خانوادگی \"\n      required\n       />\n      <input className=\"login-input first-input-lineL\"\n      type=\"text\"\n      maxLength={12}\n      value={codeValue}\n      onChange={(\n        (e)=>{\n          const code = e.target.value;\n          socket.emit('checkNCode', code)\n          if (code == '') {\n            setError('')\n          }if (code.length == 3 || code.length == 10 ) {\n            setCodeValue(code+\"-\")\n          }else {\n            setCodeValue(code)\n          }\n        }\n      )}\n      onFocus={(\n        (e)=>{\n          document.getElementById('input-sub-u').style.display = 'block';\n        }\n      )}\n      onBlur={(\n        (e)=>{\n          document.getElementById('input-sub-u').style.display = 'none';\n          let a = [];\n          let codeArray = e.target.value.replace(\"-\", \"\").replace(\"-\", \"\").split('');\n          for (var i = 0; i <= 8; i++) {\n            a.push(codeArray[i] * (10 - i))\n          }\n          console.log(codeArray)\n          let r = (a[0]+a[1]+a[2]+a[3]+a[4]+a[5]+a[6]+a[7]+a[8])%11;\n          if (r < 2) {\n            if (codeArray[9] != 2) {\n              setError(\"کد ملی صحیح نیست. از انگلیسی بودن اعداد اطمینان حاصل کنید\")\n              document.getElementById('register-button').disabled = true;\n              document.getElementById('register-button').style.opacity = .6;\n              document.getElementById('register-button').style.cursor = 'not-allowed'\n            }else {\n              setError(\"\")\n            }\n          }else {\n            if (codeArray[9] != (11-r)) {\n              setError(\"کد ملی صحیح نیست. از انگلیسی بودن اعداد اطمینان حاصل کنید\")\n              document.getElementById('register-button').disabled = true;\n              document.getElementById('register-button').style.opacity = .6;\n              document.getElementById('register-button').style.cursor = 'not-allowed'\n            }else {\n              setError(\"\")\n            }\n          }\n        }\n      )}\n      placeholder=\"کد ملی\"\n      required\n       />\n      </div>\n      <p className={\"input-sub\"} id={'input-sub-n'}>لطفا نام و نام خانوادگی خود را کامل و با یک فاصله در بین وارد کنید. این به سیستم کمک میکند تا اگر عضو صندوق بوده اید شما را شناسایی کند.</p>\n      <p className={\"input-sub\"} id={'input-sub-u'}>کد ملی شما تنها در اختیار مدیران قرار خواهد گرفت تا اگر قبلا عضو صندوق بودید شما را شناسایی کنند و اگر عضو جدید هستید، شناسه منحصر به فرد شما باشد. پس از تایید، می توانید آن را تغییر دهید. برای اطلاعات بیشتر میتوانید به <Link to=\"/privacy\" style={{color: 'black'}}>سیاست حریم خصوصی ما </Link> مراجعه کنید.</p>\n      <div>\n       <input className=\"login-input\"\n       type=\"tel\"\n       value={emailValue}\n       onChange={((e)=>{setEmailValue(e.target.value)})}\n       placeholder=\"یک شماره تلفن همراه وارد کنید\"\n        />\n      </div>\n      <div>\n        <input className=\"login-input\"\n        type=\"password\"\n        value={passValue}\n        onChange={((e)=>{setPassValue(e.target.value)})}\n        placeholder=\"یک رمزعبور قوی انتخاب کنید\"\n        required\n        />\n      </div>\n      <div className=\"form-error\">{error}</div>\n      <div className=\"button-cont\">\n        <Link className=\"create-account\" to={'/login'}>\n          ورود\n        </Link>\n        <button id=\"register-button\" className=\"submit-button\">ایجاد حساب</button>\n      </div>\n    </form>\n  );\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}